    }

    function editFriend(id, e) {
        e.stopPropagation(); const f = friends.find(x => x.id == id);
        const nn = prompt("الاسم الجديد:", f.name); if(nn) { f.name = nn; localStorage.setItem('my_friends_v2', JSON.stringify(friends)); renderFriends(); }
    }

    function removeFriend(id, e) { e.stopPropagation(); if(confirm("حذف؟")) { friends = friends.filter(x => x.id != id); localStorage.setItem('my_friends_v2', JSON.stringify(friends)); renderFriends(); } }
    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('hidden'); }
    function closeSettings() { document.getElementById('settingsModal').style.display = 'none'; }
    function copyGeneratedLink() { document.getElementById('generatedLinkInput').select(); document.execCommand('copy'); alert("تم النسخ ✅"); }
    function loadUI() {
        document.getElementById('myName').innerText = localStorage.getItem('zain_name') || "مستخدم #" + myID;
        document.getElementById('myPfp').src = localStorage.getItem('zain_pic') || "https://www.gravatar.com/avatar/" + myID + "?d=identicon";
    }
</script>
</body>
</html>
